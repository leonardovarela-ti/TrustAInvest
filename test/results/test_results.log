TrustAInvest Integration Test Results
Run at: Tue Apr  8 20:08:49 CDT 2025
=======================================

Running test: failed_registration_test.sh
----------------------------------------
[0;33mStarting failed registration test...[0m
[0;33mStep 1: Starting the system...[0m
 Network test-network  Removing
 Network test-network  No resource found to remove
[0;33mStarting services (this may take a minute)...[0m
 Network test-network  Creating
 Network test-network  Created
 Container test-redis-1  Creating
 Container test-localstack-1  Creating
 Container test-postgres-1  Creating
 Container test-localstack-1  Created
 Container test-redis-1  Created
 Container test-postgres-1  Created
 Container test-kyc-worker-1  Creating
 Container test-user-registration-service-1  Creating
 Container test-user-registration-service-1  Created
 Container test-kyc-worker-1  Created
 Container test-localstack-1  Starting
 Container test-postgres-1  Starting
 Container test-redis-1  Starting
 Container test-redis-1  Started
 Container test-postgres-1  Started
 Container test-localstack-1  Started
 Container test-localstack-1  Waiting
 Container test-postgres-1  Waiting
 Container test-postgres-1  Waiting
 Container test-redis-1  Waiting
 Container test-localstack-1  Waiting
 Container test-redis-1  Healthy
 Container test-postgres-1  Healthy
 Container test-postgres-1  Healthy
 Container test-localstack-1  Healthy
 Container test-user-registration-service-1  Starting
 Container test-localstack-1  Healthy
 Container test-kyc-worker-1  Starting
 Container test-kyc-worker-1  Started
 Container test-user-registration-service-1  Started
[0;33mWaiting for services to be ready...[0m
[0;33mChecking if user-registration-service is up...[0m
[0;32mUser registration service is up![0m
[0;33mTest Case 1: Attempting registration with missing required fields...[0m
Registration response: {"error":"Key: 'User.FirstName' Error:Field validation for 'FirstName' failed on the 'required' tag\nKey: 'User.LastName' Error:Field validation for 'LastName' failed on the 'required' tag\nKey: 'User.DateOfBirth' Error:Field validation for 'DateOfBirth' failed on the 'required' tag\nKey: 'User.AcceptTerms' Error:Field validation for 'AcceptTerms' failed on the 'required' tag"}
[0;32mTest passed: Registration failed as expected due to missing required fields[0m
[0;33mTest Case 2: Attempting registration with invalid email format...[0m
Registration response: {"errors":[{"field":"email","message":"Invalid email format"}]}
[0;32mTest passed: Registration failed as expected due to invalid email format[0m
[0;33mTest Case 3: Attempting registration with weak password...[0m
Registration response: {"errors":[{"field":"password","message":"Password must be at least 8 characters and include uppercase, lowercase, number, and special character"}]}
[0;32mTest passed: Registration failed as expected due to weak password[0m
[0;33mTest Case 4: Attempting email verification with invalid token...[0m
Verification response: {"error":"Invalid or expired verification token"}
[0;32mTest passed: Verification failed as expected due to invalid token[0m
[0;33mTest Case 5: Register a user, then try to register with the same username...[0m
First registration response: {"message":"User registered successfully. Please check your email to verify your account.","user_id":"49209cc2-1085-4a08-b388-39147815fd05"}
Second registration response: {"error":"Username already taken"}
[0;32mTest passed: Second registration failed as expected due to duplicate username[0m
[0;32mAll failed registration tests passed successfully![0m
[0;33mCleaning up...[0m
 Container test-kyc-worker-1  Stopping
 Container test-user-registration-service-1  Stopping
 Container test-kyc-worker-1  Stopped
 Container test-kyc-worker-1  Removing
 Container test-kyc-worker-1  Removed
 Container test-user-registration-service-1  Stopped
 Container test-user-registration-service-1  Removing
 Container test-user-registration-service-1  Removed
 Container test-postgres-1  Stopping
 Container test-redis-1  Stopping
 Container test-localstack-1  Stopping
 Container test-postgres-1  Stopped
 Container test-postgres-1  Removing
 Container test-postgres-1  Removed
 Container test-redis-1  Stopped
 Container test-redis-1  Removing
 Container test-redis-1  Removed
 Container test-localstack-1  Stopped
 Container test-localstack-1  Removing
 Container test-localstack-1  Removed
 Network test-network  Removing
 Network test-network  Removed
RESULT: PASSED

========================================

Running test: integration_test.sh
----------------------------------------
[0;33mStarting integration tests...[0m
[0;33mStep 1: Starting the system...[0m
 Network test-network  Removing
 Network test-network  No resource found to remove
[0;33mStarting services (this may take a minute)...[0m
 Network test-network  Creating
 Network test-network  Created
 Container test-postgres-1  Creating
 Container test-localstack-1  Creating
 Container test-redis-1  Creating
 Container test-redis-1  Created
 Container test-localstack-1  Created
 Container test-postgres-1  Created
 Container test-kyc-worker-1  Creating
 Container test-user-registration-service-1  Creating
 Container test-kyc-worker-1  Created
 Container test-user-registration-service-1  Created
 Container test-localstack-1  Starting
 Container test-postgres-1  Starting
 Container test-redis-1  Starting
 Container test-redis-1  Started
 Container test-localstack-1  Started
 Container test-postgres-1  Started
 Container test-localstack-1  Waiting
 Container test-postgres-1  Waiting
 Container test-localstack-1  Waiting
 Container test-postgres-1  Waiting
 Container test-redis-1  Waiting
 Container test-postgres-1  Healthy
 Container test-redis-1  Healthy
 Container test-postgres-1  Healthy
 Container test-localstack-1  Healthy
 Container test-user-registration-service-1  Starting
 Container test-localstack-1  Healthy
 Container test-kyc-worker-1  Starting
 Container test-kyc-worker-1  Started
 Container test-user-registration-service-1  Started
[0;33mWaiting for services to be ready...[0m
[0;33mChecking if user-registration-service is up...[0m
[0;32mUser registration service is up![0m
[0;33mStep 2: Registering a user...[0m
Registration response: {"message":"User registered successfully. Please check your email to verify your account.","user_id":"987e7836-5700-44b7-9950-52683d598697"}
[0;32mUser registered successfully![0m
[0;33mStep 3: Extracting verification token from logs...[0m
[0;32mExtracted verification token: c310e8a6-851a-4c01-a378-10efdd6a0a9c[0m
[0;33mStep 4: Verifying email with token...[0m
Verification response: {"message":"Email verified successfully. Your account is now active."}
[0;32mEmail verified successfully![0m
[0;33mStep 5: Checking KYC verification request in database...[0m
[0;32mKYC verification request found in the database![0m
[0;33mKYC verification request details:[0m
                  id                  |               user_id                | status  |          created_at          |                                                         request_data                                                         
--------------------------------------+--------------------------------------+---------+------------------------------+------------------------------------------------------------------------------------------------------------------------------
 66d26b20-34ae-4ed0-9ebd-05f0468f0192 | 987e7836-5700-44b7-9950-52683d598697 | PENDING | 2025-04-09 01:09:27.27706+00 | {"source": "EMAIL_VERIFICATION", "user_id": "987e7836-5700-44b7-9950-52683d598697", "request_type": "IDENTITY_VERIFICATION"}
(1 row)

[0;32mAll tests passed successfully![0m
[0;33mCleaning up...[0m
 Container test-kyc-worker-1  Stopping
 Container test-user-registration-service-1  Stopping
 Container test-kyc-worker-1  Stopped
 Container test-kyc-worker-1  Removing
 Container test-kyc-worker-1  Removed
 Container test-user-registration-service-1  Stopped
 Container test-user-registration-service-1  Removing
 Container test-user-registration-service-1  Removed
 Container test-localstack-1  Stopping
 Container test-postgres-1  Stopping
 Container test-redis-1  Stopping
 Container test-redis-1  Stopped
 Container test-redis-1  Removing
 Container test-postgres-1  Stopped
 Container test-postgres-1  Removing
 Container test-redis-1  Removed
 Container test-postgres-1  Removed
 Container test-localstack-1  Stopped
 Container test-localstack-1  Removing
 Container test-localstack-1  Removed
 Network test-network  Removing
 Network test-network  Removed
RESULT: PASSED

========================================

